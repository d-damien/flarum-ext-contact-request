{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@d-damien/contact-request/webpack/bootstrap","webpack://@d-damien/contact-request/webpack/runtime/compat get default export","webpack://@d-damien/contact-request/webpack/runtime/define property getters","webpack://@d-damien/contact-request/webpack/runtime/hasOwnProperty shorthand","webpack://@d-damien/contact-request/webpack/runtime/make namespace object","webpack://@d-damien/contact-request/external root \"flarum.core.compat['forum/app']\"","webpack://@d-damien/contact-request/external root \"flarum.core.compat['common/extend']\"","webpack://@d-damien/contact-request/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@d-damien/contact-request/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@d-damien/contact-request/../../nutriknow/js/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@d-damien/contact-request/../../nutriknow/js/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@d-damien/contact-request/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@d-damien/contact-request/./src/forum/ContactRequestSent.js","webpack://@d-damien/contact-request/external root \"flarum.core.compat['common/components/Button']\"","webpack://@d-damien/contact-request/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@d-damien/contact-request/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@d-damien/contact-request/./src/forum/ContactRequestButton.js","webpack://@d-damien/contact-request/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import Notification from 'flarum/forum/components/Notification';\n\nexport default class ContactRequestSent extends Notification {\n  icon() {\n    return 'fas fa-paper-plane';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const sender = notification.subject();\n    // const content = notification.content() || {};\n\n    return app.route.user(sender);\n  }\n\n  content() {\n    return app.translator.trans(\n      'd-damien-contact-request.forum.notifications.sent',\n      { user: this.attrs.notification.fromUser() }\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator'\n\nexport default class ContactRequestButton extends Button {\n  buttonText = ''\n  loading = null\n\n  oncreate() {\n    this.buttonText = app.translator.trans('d-damien-contact-request.forum.send')\n  }\n\n  onclick() {\n    if (this.loading !== null) {\n      return\n    }\n\n    this.loading = true\n    app.request({\n      method: 'POST',\n      url: '/u/' + this.attrs.userId + '/contact-request',\n    })\n    .then(_ => {\n      this.buttonText = app.translator.trans('d-damien-contact-request.forum.sent')\n      this.loading = false\n      m.redraw()\n    })\n  }\n\n  getButtonContent(children) {\n    return [\n      icon('fas fa-paper-plane', { className: 'Button-icon' }),\n      children && <span onclick={e => this.onclick()} className=\"Button-label\">{this.buttonText}</span>,\n      this.loading && <LoadingIndicator size=\"small\" display=\"inline\" />,\n    ];\n  }\n}\n\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport ContactRequestSent from './ContactRequestSent'\nimport ContactRequestButton from './ContactRequestButton'\n\n\napp.initializers.add('d-damien/contact-request', _ => {\n  // matching server & browser\n  app.notificationComponents.contactRequestSent = ContactRequestSent;\n  // settings\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('contactRequestSent', {\n      name: 'contactRequestSent',\n      icon: 'fas fa-paper-plane',\n      label: app.translator.trans('d-damien-contact-request.forum.settings.notify_sent')\n    })\n  })\n\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (app.session.user.id() === this.user.id()) {\n      return\n    }\n    items.add('contact-request', <ContactRequestButton userId={this.user.id()} />)\n  })\n})\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","ContactRequestSent","_Notification","apply","arguments","_proto","icon","href","sender","this","attrs","notification","subject","app","route","user","content","translator","trans","fromUser","Notification","ContactRequestButton","_Button","_this","_len","length","args","Array","_key","concat","buttonText","loading","oncreate","onclick","_this2","request","method","url","userId","then","_","m","redraw","getButtonContent","children","_this3","className","e","LoadingIndicator","size","display","Button","add","contactRequestSent","extend","NotificationGrid","items","name","label","UserPage","id"],"sourceRoot":""}